<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ЕГЭ Химия</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#0b0b0c;
      --muted:rgba(0,0,0,0.60);
      --border:rgba(0,0,0,0.10);
      --card:rgba(255,255,255,0.72);
      --shadow:0 18px 40px rgba(0,0,0,0.10);
      --accent:#007aff;
      --ok:#16a34a;
      --bad:#dc2626;
      --radius:22px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b0b0c;
        --text:rgba(255,255,255,0.94);
        --muted:rgba(255,255,255,0.62);
        --border:rgba(255,255,255,0.12);
        --card:rgba(18,18,19,0.62);
        --shadow:0 26px 60px rgba(0,0,0,0.55);
        --accent:#0a84ff;
      }
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display",
                   "Segoe UI", Roboto, Arial, sans-serif;
      min-height:100vh;
    }

    /* очень мягкий фон — не “эффект ради эффекта”, а глубина */
    .bg{
      position:fixed; inset:0; pointer-events:none;
      background:
        radial-gradient(980px 640px at 15% 8%, rgba(0,122,255,0.14), transparent 62%),
        radial-gradient(860px 560px at 92% 18%, rgba(122,73,255,0.12), transparent 62%),
        radial-gradient(980px 700px at 40% 110%, rgba(0,200,255,0.10), transparent 62%);
      filter:saturate(1.05);
    }

    .wrap{
      max-width: 1120px;
      margin: 0 auto;
      padding: 18px 16px 40px;
      position:relative;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    .logo{
      width: 34px; height: 34px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(0,122,255,1), rgba(122,73,255,1));
      box-shadow: 0 18px 40px rgba(0,122,255,0.20);
    }
    .brandText{ line-height:1.05; }
    .brandText b{ display:block; font-weight: 760; letter-spacing:-0.25px; font-size: 13px; opacity:0.95; }
    .brandText span{ display:block; font-size: 12px; color: var(--muted); }

    .pill{
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.50);
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 12px;
      color: var(--muted);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      white-space: nowrap;
    }
    @media (prefers-color-scheme: dark){
      .pill{ background: rgba(255,255,255,0.06); }
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 12px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border: 1px solid var(--border);
      background: var(--card);
      border-radius: 26px;
      box-shadow: var(--shadow);
      padding: 16px;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow:hidden;
      position:relative;
    }

    .cardTitle{
      margin:0;
      font-size: 14px;
      letter-spacing: 0.2px;
      color: var(--muted);
      text-transform: uppercase;
    }

    h1{
      margin: 10px 0 0;
      font-size: 44px;
      letter-spacing: -1.1px;
      line-height: 1.02;
    }
    @media (max-width: 520px){
      h1{ font-size: 36px; }
    }

    .lead{
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 65ch;
      line-height: 1.55;
      font-size: 15px;
    }

    .cta{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.55);
      color: inherit;
      text-decoration:none;
      font-weight: 700;
      letter-spacing: -0.2px;
      transition: transform .18s ease, border-color .18s ease, background .18s ease;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      cursor:pointer;
    }
    @media (prefers-color-scheme: dark){
      .btn{ background: rgba(255,255,255,0.06); }
    }
    .btn:hover{ transform: translateY(-1px); }

    .btnPrimary{
      border: none;
      color: white;
      background: var(--accent);
      box-shadow: 0 18px 40px rgba(0,122,255,0.22);
    }

    .btnGhost{
      background: transparent;
    }

    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 14px;
    }
    @media (max-width: 640px){
      .split{ grid-template-columns: 1fr; }
    }

    .metric{
      border: 1px solid var(--border);
      border-radius: 20px;
      background: rgba(255,255,255,0.55);
      padding: 12px;
    }
    @media (prefers-color-scheme: dark){
      .metric{ background: rgba(255,255,255,0.05); }
    }
    .metric b{
      display:block;
      font-size: 28px;
      letter-spacing: -0.8px;
      margin-top: 2px;
    }
    .metric span{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .list{
      margin-top: 8px;
      display:grid;
      gap: 10px;
    }

    .item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 12px 12px;
      border-radius: 20px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.55);
      text-decoration:none;
      color: inherit;
      transition: transform .18s ease;
    }
    @media (prefers-color-scheme: dark){
      .item{ background: rgba(255,255,255,0.05); }
    }
    .item:hover{ transform: translateY(-1px); }

    .left{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .icon{
      width: 38px; height: 38px;
      border-radius: 16px;
      border: 1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      letter-spacing: -0.6px;
      opacity: 0.92;
      background: rgba(255,255,255,0.40);
    }
    @media (prefers-color-scheme: dark){
      .icon{ background: rgba(255,255,255,0.03); }
    }

    .text{
      min-width: 0;
    }
    .name{
      margin:0;
      font-size: 14px;
      font-weight: 780;
      letter-spacing: -0.2px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .meta{
      margin: 3px 0 0;
      font-size: 12px;
      color: var(--muted);
    }
    .arrow{ opacity: .55; font-size: 18px; }

    .miniRow{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 12px;
      align-items:center;
    }

    .toggle{
      display:flex;
      align-items:center;
      gap: 8px;
      font-size: 12px;
      color: var(--muted);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 8px 10px;
      background: rgba(255,255,255,0.45);
    }
    @media (prefers-color-scheme: dark){
      .toggle{ background: rgba(255,255,255,0.04); }
    }

    footer{
      margin-top: 14px;
      color: var(--muted);
      font-size: 12px;
      display:flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
      opacity: 0.92;
    }

    @media (prefers-reduced-motion: no-preference){
      header, .card, footer{
        animation: fadeUp .45s ease both;
      }
      .card:nth-child(2){ animation-delay: .04s; }
      @keyframes fadeUp{
        from{ opacity:0; transform: translateY(8px); }
        to{ opacity:1; transform: translateY(0); }
      }
    }
  </style>
</head>

<body>
  <div class="bg"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div class="brandText">
          <b>ЕГЭ Химия</b>
          <span>центр тренировки</span>
        </div>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
        <span class="pill" id="today"></span>
        <span class="pill" id="statusPill">готов к работе</span>
      </div>
    </header>

    <div class="grid">
      <!-- Левая: “Продолжить” + метрики -->
      <section class="card" aria-label="Главный блок">
        <p class="cardTitle">Продолжить</p>
        <h1 id="headline">Открыть тренировку</h1>
        <p class="lead" id="lead">
          Один экран — один смысл: возвращайтесь туда, где остановились, и двигайтесь дальше.
        </p>

        <div class="cta">
          <a class="btn btnPrimary" id="continueBtn" href="inorg-nomenclature.html">Продолжить</a>
          <a class="btn btnGhost" href="inorg-nomenclature.html">Начать заново</a>
          <button class="btn" id="resetStatsBtn" type="button">Сбросить прогресс</button>
        </div>

        <div class="split" aria-label="Метрики">
          <div class="metric">
            <span>точность (последняя попытка)</span>
            <b id="acc">—</b>
          </div>
          <div class="metric">
            <span>отвечено</span>
            <b id="done">—</b>
          </div>
        </div>

        <div class="miniRow">
          <div class="toggle">
            <input type="checkbox" id="autoc" />
            авто при верном
          </div>
          <div class="toggle">
            <input type="checkbox" id="autow" />
            авто при ошибке
          </div>
          <div class="toggle">
            <input type="checkbox" id="mix" checked />
            перемешать ответы
          </div>
        </div>
      </section>

      <!-- Правая: модульный “лаунчер” -->
      <aside class="card" aria-label="Модули">
        <p class="cardTitle">Модули</p>

        <div class="list">
          <a class="item" href="inorg-nomenclature.html" id="nomenItem">
            <div class="left">
              <div class="icon">N</div>
              <div class="text">
                <p class="name">Номенклатура неорганики</p>
                <p class="meta" id="nomenMeta">32 задания</p>
              </div>
            </div>
            <div class="arrow">›</div>
          </a>

          <a class="item" href="#" onclick="alert('Скоро добавим модуль ОВР.'); return false;">
            <div class="left">
              <div class="icon">ОВ</div>
              <div class="text">
                <p class="name">ОВР и баланс</p>
                <p class="meta">в разработке</p>
              </div>
            </div>
            <div class="arrow">›</div>
          </a>

          <a class="item" href="#" onclick="alert('Скоро добавим модуль Растворы.'); return false;">
            <div class="left">
              <div class="icon">pH</div>
              <div class="text">
                <p class="name">Растворы и pH</p>
                <p class="meta">в разработке</p>
              </div>
            </div>
            <div class="arrow">›</div>
          </a>
        </div>

        <footer>
          <div>© <span id="y"></span></div>
          <div>минимализм без лишних слов</div>
        </footer>
      </aside>
    </div>
  </div>

<script>
  document.getElementById("y").textContent = new Date().getFullYear();

  // Дата “по-человечески”
  const d = new Date();
  const fmt = new Intl.DateTimeFormat("ru-RU", { weekday:"long", day:"2-digit", month:"long" });
  document.getElementById("today").textContent = fmt.format(d);

  // --- Прогресс: читаем из localStorage тренажёра ---
  // В текущей версии тренажёра мы не сохраняли прогресс специально.
  // Здесь реализован “совместимый” вариант: если прогресс будет найден — используем его.
  // Если нет — показываем аккуратные “—”, без ошибок.

  const PROGRESS_KEY = "chem_inorg_progress_v1";

  function safeParse(json){
    try { return JSON.parse(json); } catch(e){ return null; }
  }

  function updateUI(p){
    const accEl = document.getElementById("acc");
    const doneEl = document.getElementById("done");
    const headEl = document.getElementById("headline");
    const leadEl = document.getElementById("lead");
    const statusPill = document.getElementById("statusPill");
    const continueBtn = document.getElementById("continueBtn");

    if(!p){
      accEl.textContent = "—";
      doneEl.textContent = "—";
      headEl.textContent = "Открыть тренировку";
      leadEl.textContent = "Один экран — один смысл: тренируйтесь короткими подходами и фиксируйте результат.";
      statusPill.textContent = "прогресс не сохранён";
      continueBtn.textContent = "Открыть";
      continueBtn.href = "inorg-nomenclature.html";
      return;
    }

    const total = Number(p.total || 0);
    const correct = Number(p.correct || 0);
    const answered = Number(p.answered || 0);
    const idx = Number(p.lastIndex || 0);

    const acc = answered ? Math.round((correct/answered)*100) : 0;

    accEl.textContent = answered ? acc + "%" : "—";
    doneEl.textContent = answered && total ? `${answered}/${total}` : (answered ? String(answered) : "—");

    headEl.textContent = answered ? "Продолжить с места" : "Начать тренировку";
    leadEl.textContent = answered
      ? `Последняя сессия: ${answered} ответов, точность ${acc}%.`
      : "Короткий подход, высокая отдача. Нажмите и начните.";

    statusPill.textContent = answered ? `последний вопрос: ${Math.min(idx+1, total || idx+1)}` : "готов к работе";
    continueBtn.textContent = answered ? "Продолжить" : "Начать";

    // Передадим в тренажёр параметры через query (опционально на будущее).
    continueBtn.href = "inorg-nomenclature.html";
  }

  updateUI(safeParse(localStorage.getItem(PROGRESS_KEY)));

  // Переключатели (сохраняем предпочтения на главной)
  const PREF_KEY = "chem_home_prefs_v1";
  const prefs = safeParse(localStorage.getItem(PREF_KEY)) || { autoc:false, autow:false, mix:true };

  const autoc = document.getElementById("autoc");
  const autow = document.getElementById("autow");
  const mix = document.getElementById("mix");

  autoc.checked = !!prefs.autoc;
  autow.checked = !!prefs.autow;
  mix.checked = prefs.mix !== false;

  function savePrefs(){
    localStorage.setItem(PREF_KEY, JSON.stringify({ autoc:autoc.checked, autow:autow.checked, mix:mix.checked }));
  }
  autoc.addEventListener("change", savePrefs);
  autow.addEventListener("change", savePrefs);
  mix.addEventListener("change", savePrefs);

  // Сброс “прогресса” и настроек
  document.getElementById("resetStatsBtn").addEventListener("click", () => {
    localStorage.removeItem(PROGRESS_KEY);
    localStorage.removeItem(PREF_KEY);
    autoc.checked = false;
    autow.checked = false;
    mix.checked = true;
    updateUI(null);
  });
</script>
</body>
</html>
